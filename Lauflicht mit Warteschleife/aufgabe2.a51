ORG 0
MOV A, #1
MOV P3, #0

SHIFT_LEFT:
	
	MOV R1, #100
	MOV R2, #180

	MOV P3, A
	RL A
	
	WAIT_OUT_LEFT:
		WAIT_IN_LEFT:
		NOP
		NOP
		NOP
		DJNZ R1, WAIT_IN_LEFT 
	DJNZ R2, WAIT_OUT_LEFT

CJNE A, #10000000B, SHIFT_LEFT

SHIFT_RIGHT:

	MOV R1, #100
	MOV R2, #180


	MOV P3, A
	RR A

	WAIT_OUT_RIGHT:
		WAIT_IN_RIGHT:
		NOP
		NOP
		NOP
		DJNZ R1, WAIT_IN_RIGHT 
	DJNZ R2, WAIT_OUT_RIGHT

CJNE A, #00000001B, SHIFT_RIGHT

SJMP SHIFT_LEFT

END